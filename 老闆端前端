<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>ğŸª åº—å®¶å¾Œå°ç®¡ç†èˆ‡è¨‚å–®ç³»çµ±ï¼ˆç©©å®šç‰ˆï¼‰</title>

<style>
body{font-family:"Microsoft JhengHei";margin:0;background:#f7f7f7}
header{background:#43a047;color:#fff;text-align:center;padding:15px;font-size:22px}
.container{max-width:900px;margin:20px auto;background:#fff;border-radius:10px;padding:20px}
button{cursor:pointer;border:none;border-radius:6px;padding:6px 12px;font-weight:bold}
.open-btn{background:#4caf50;color:#fff}
.close-btn{background:#e53935;color:#fff}
.danger{background:#e53935;color:#fff}
.status{font-size:18px;font-weight:bold;margin-top:10px;text-align:center}
.status.open{color:#43a047}
.status.closed{color:#e53935}
input{padding:6px;border-radius:5px;border:1px solid #ccc;margin:3px 0}
table{width:100%;border-collapse:collapse;margin-top:10px}
th,td{padding:8px;border-bottom:1px solid #ccc;text-align:center}
th{background:#e8f5e9}
.tab-buttons{display:flex;justify-content:center;margin-bottom:15px}
.tab-buttons button.active{background:#43a047;color:#fff}
.page{display:none}
.page.active{display:block}
</style>
</head>

<body>
<header>ğŸª åº—å®¶å¾Œå°ç®¡ç†èˆ‡è¨‚å–®ç³»çµ±ï¼ˆç©©å®šç‰ˆï¼‰</header>

<div class="container">
<div class="tab-buttons">
<button id="tab1" class="active">åº—å®¶è³‡è¨Š</button>
<button id="tab2">èœå–®ç®¡ç†</button>
<button id="tab3">è¨‚å–®ç®¡ç†</button>
</div>

<div id="page1" class="page active">
<input id="ownerName" placeholder="è€é—†å§“å">
<input id="shopName" placeholder="åº—å">
<button onclick="saveShop()">å„²å­˜</button>
<p id="shopDisplay">å°šæœªè¨­å®š</p>
<button class="open-btn" onclick="setStatus('ç‡Ÿæ¥­ä¸­')">é–‹å§‹ç‡Ÿæ¥­</button>
<button class="close-btn" onclick="setStatus('ä¼‘æ¥­ä¸­')">çµæŸç‡Ÿæ¥­</button>
<div id="statusText" class="status closed">ç›®å‰ç‹€æ…‹ï¼šä¼‘æ¥­ä¸­</div>
</div>

<div id="page2" class="page">
<input id="itemName" placeholder="å“é …">
<input id="itemPrice" type="number" placeholder="åƒ¹æ ¼">
<input id="itemStock" type="number" placeholder="åº«å­˜">
<button onclick="addItem()">æ–°å¢èœå–®</button>

<table>
<thead><tr><th>å“é …</th><th>åƒ¹æ ¼</th><th>åº«å­˜</th><th>æ“ä½œ</th></tr></thead>
<tbody id="menuTable"></tbody>
</table>
</div>

<div id="page3" class="page">
<table>
<thead><tr><th>å“é …</th><th>æ•¸é‡</th><th>ç¸½åƒ¹</th><th>æ“ä½œ</th></tr></thead>
<tbody id="orderTable"></tbody>
</table>
</div>
</div>

<script>
const $ = id => document.getElementById(id);

/* Tabs */
document.querySelectorAll(".tab-buttons button").forEach(btn=>{
btn.onclick=()=>{
document.querySelectorAll(".tab-buttons button").forEach(b=>b.classList.remove("active"));
document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
btn.classList.add("active");
$(btn.id.replace("tab","page")).classList.add("active");
};
});

/* è³‡æ–™ */
let shop = JSON.parse(localStorage.getItem("shop")) || {owner:"",name:"",status:"ä¼‘æ¥­ä¸­"};
let menu = JSON.parse(localStorage.getItem("menu")) || [];
let orders = JSON.parse(localStorage.getItem("orders")) || [];

/* åº—å®¶ */
function saveShop(){
shop.owner=$("ownerName").value;
shop.name=$("shopName").value;
localStorage.setItem("shop",JSON.stringify(shop));
loadShop();
}

function setStatus(s){
shop.status=s;
localStorage.setItem("shop",JSON.stringify(shop));
loadShop();
}

function loadShop(){
$("shopDisplay").textContent = shop.owner ? shop.owner+"ï½œ"+shop.name : "å°šæœªè¨­å®š";
$("statusText").textContent="ç›®å‰ç‹€æ…‹ï¼š"+shop.status;
$("statusText").className="status "+(shop.status==="ç‡Ÿæ¥­ä¸­"?"open":"closed");
}

/* èœå–® */
function addItem(){
menu.push({id:Date.now(),name:$("itemName").value,price:+$("itemPrice").value,stock:+$("itemStock").value});
localStorage.setItem("menu",JSON.stringify(menu));
renderMenu();
}

function delItem(id){
menu=menu.filter(m=>m.id!==id);
localStorage.setItem("menu",JSON.stringify(menu));
renderMenu();
}

function renderMenu(){
$("menuTable").innerHTML="";
menu.forEach(m=>{
$("menuTable").innerHTML+=`
<tr>
<td>${m.name}</td>
<td>$${m.price}</td>
<td>${m.stock}</td>
<td>
<button onclick="orderItem(${m.id})">ä¸‹å–®</button>
<button class="danger" onclick="delItem(${m.id})">åˆªé™¤</button>
</td>
</tr>`;
});
}

/* è¨‚å–® */
function orderItem(id){
const item=menu.find(m=>m.id===id);
if(item.stock<=0)return alert("åº«å­˜ä¸è¶³");
item.stock--;
orders.push({id:Date.now(),name:item.name,qty:1,total:item.price});
localStorage.setItem("menu",JSON.stringify(menu));
localStorage.setItem("orders",JSON.stringify(orders));
renderMenu();
renderOrders();
}

function deleteOrder(id){
orders=orders.filter(o=>o.id!==id);
localStorage.setItem("orders",JSON.stringify(orders));
renderOrders();
}

function renderOrders(){
$("orderTable").innerHTML="";
orders.forEach(o=>{
$("orderTable").innerHTML+=`
<tr>
<td>${o.name}</td>
<td>${o.qty}</td>
<td>$${o.total}</td>
<td><button class="danger" onclick="deleteOrder(${o.id})">åˆªé™¤</button></td>
</tr>`;
});
}

/* åˆå§‹åŒ– */
loadShop();
renderMenu();
renderOrders();
</script>
</body>
</html>
